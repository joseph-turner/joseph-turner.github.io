---
import Layout from '@layouts/Layout.astro';

import ResumeTimeline from '../../components/ResumeTimeline.tsx';
import { SkillsGrid } from '../../components/SkillsGrid';
import { jobs } from './jobs.js';
import { skills as skillsMap } from './skills';

// Map job skill keys (strings) to canonical Skill objects for the SkillsGrid
const skills = jobs.flatMap((job) =>
  job.skills.map((s) => (typeof s === 'string' ? (skillsMap as any)[s] : s))
);
---

<Layout>
  <main class="mx-auto max-w-screen-lg px-4 py-16">
    <section class="container mx-auto mb-12 px-6">
      <h1 class="text-3xl font-extrabold">Resume</h1>
      <p class="mt-4 text-gray-700 dark:text-gray-300">
        Joseph Turner is a Senior Front End Developer with 13+
        years of experience, specializing in modern web
        technologies and performance optimization. He has a
        proven track record of improving web applications through
        technical leadership, process implementation, and
        performance optimization.
      </p>
    </section>

    <ResumeTimeline client:load jobs={jobs} />

    <section class="container mx-auto my-12 px-6">
      <h2 class="text-2xl font-extrabold">Skills</h2>
      <p class="mt-4 text-gray-700 dark:text-gray-300">
        A collection of skills and technologies I've used in my
        career.
      </p>
      <SkillsGrid client:load skills={skills} />
    </section>
  </main>
</Layout>
